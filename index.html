<!DOCTYPE html>
<html lang="ko" class="overflow-x-hidden">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LCB: ë‹¤ìš©ë„ ê³„ì‚°ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700;900&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; background-color: black; color: #e5e5e5; overflow-x: hidden; width: 100%; position: relative; -webkit-text-size-adjust: none; }
        
        input[type=range].horizontal-slider { -webkit-appearance: none; width: 100%; height: 6px; background: #1f2937; border-radius: 999px; outline: none; }
        input[type=range].horizontal-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 18px; height: 18px; background: #b91c1c; border-radius: 50%; cursor: pointer; border: 2px solid #450a0a; }
        
        .slider-vertical { writing-mode: bt-lr; -webkit-appearance: slider-vertical; width: 10px; height: 180px; background: #1f2937; }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }

        .glow-red { box-shadow: 0 0 15px rgba(185, 28, 28, 0.2); }
        .tab-content { display: none; }
        .tab-content.active { display: grid; animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        
        /* ìˆ˜ì •ë¨: pointer-events: none ì œê±°í•˜ì—¬ ë¹„í™œì„± ìƒíƒœì—ì„œë„ í´ë¦­ ê°€ëŠ¥í•˜ê²Œ ë³€ê²½ */
        .disabled-btn { opacity: 0.3; filter: grayscale(1); cursor: pointer; }
        input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); cursor: pointer; }
        
        .tab-highlight { animation: pulse-red 2.5s infinite; border: 1px solid rgba(185, 28, 28, 0.4); }
        @keyframes pulse-red { 0%, 100% { box-shadow: 0 0 5px rgba(185, 28, 28, 0.2); } 50% { box-shadow: 0 0 20px rgba(185, 28, 28, 0.6); border-color: rgba(185, 28, 28, 0.8); } }
        
        .move-arrow { animation: move-side 1.2s infinite; display: inline-block; }
        @keyframes move-side { 0%, 100% { transform: translateX(0); opacity: 0.4; } 50% { transform: translateX(5px); opacity: 1; } }

        .input-box-container { position: relative; display: flex; align-items: center; background-color: black; border: 2px solid #262626; height: 42px; border-radius: 0.5rem; transition: all 0.2s; overflow: hidden; }
        .input-box-container:focus-within { border-color: #b91c1c; }
        .input-field { background: transparent; width: 100%; height: 100%; outline: none; text-align: right; padding-right: 35px; font-weight: 900; font-size: 1.1rem; color: white; }
        .input-unit { position: absolute; right: 10px; font-weight: 900; font-style: italic; font-size: 0.75rem; pointer-events: none; }

        .adjust-btn { width: 32px; height: 42px; display: flex; align-items: center; justify-content: center; background-color: #171717; border: 2px solid #262626; border-radius: 0.5rem; font-weight: 900; color: #737373; transition: all 0.2s; cursor: pointer; }
        .adjust-btn:hover { background-color: #262626; color: white; border-color: #404040; }
        .adjust-btn:active { background-color: #b91c1c; color: white; border-color: #7f1d1d; }

        .tooltip-container { position: relative; display: inline-block; z-index: 50; }
        .tooltip-box { 
            visibility: hidden; position: absolute; z-index: 999; 
            background-color: #111; border: 1px solid #b91c1c; padding: 1rem; border-radius: 0.75rem; 
            box-shadow: 0 15px 40px rgba(0,0,0,0.9); opacity: 0; transition: opacity 0.2s, visibility 0.2s; pointer-events: none;
            width: 280px; /* Fixed width for PC to prevent squash */
            bottom: 140%; left: 50%; transform: translateX(-50%);
        }
        .tooltip-container:hover .tooltip-box, .tooltip-container.active .tooltip-box { visibility: visible; opacity: 1; }

        /* Mobile specific tooltip styling overrides */
        @media (max-width: 768px) {
            .tooltip-box { 
                position: fixed; top: 50%; left: 50%; bottom: auto; right: auto;
                transform: translate(-50%, -50%) !important; 
                width: 85vw; max-width: 300px; margin: 0; 
                pointer-events: auto; 
            }
        }
    </style>
</head>
<body class="p-3 md:p-8 flex flex-col items-center min-h-screen text-sm lg:text-base leading-relaxed text-left">
    <div class="w-full max-w-6xl text-left">
        <!-- Header -->
        <header class="flex flex-col py-4 lg:py-6 border-b border-red-900 mb-6 lg:mb-8 text-left">
            <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6">
                <div class="flex items-center gap-3">
                    <div class="text-red-700">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" class="lg:w-9 lg:h-9" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v20"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
                    </div>
                    <h1 class="text-xl lg:text-3xl font-black italic uppercase tracking-tighter leading-none text-white text-left">LCB: ë‹¤ìš©ë„ ê³„ì‚°ê¸°</h1>
                </div>
                
                <nav class="flex bg-neutral-900 p-1 rounded-lg tab-highlight mx-auto sm:mx-0 sm:self-center relative">
                    <button onclick="switchTab('cycle')" id="tab-btn-cycle-top" class="relative px-2.5 sm:px-4 py-2 text-[9.5px] sm:text-[11px] lg:text-sm font-black rounded-md transition-all-200 bg-red-800 text-white z-10 whitespace-nowrap tracking-tighter sm:tracking-normal">ì •ê°€ ì£¼ê¸° ê³„ì‚°</button>
                    <button onclick="switchTab('shard')" id="tab-btn-shard-top" class="relative px-2.5 sm:px-4 py-2 text-[9.5px] sm:text-[11px] lg:text-sm font-black rounded-md transition-all-200 text-neutral-500 hover:text-neutral-300 z-10 flex items-center gap-0.5 sm:gap-1 whitespace-nowrap tracking-tighter sm:tracking-normal">
                        íŒŒí¸ ëª¨ìœ¼ê¸° <span id="arrow-shard-top" class="move-arrow text-red-500 font-black">Â»</span>
                    </button>
                    <button onclick="switchTab('billing')" id="tab-btn-billing-top" class="relative px-2.5 sm:px-4 py-2 text-[9.5px] sm:text-[11px] lg:text-sm font-black rounded-md transition-all-200 text-neutral-500 hover:text-neutral-300 z-10 flex items-center gap-0.5 sm:gap-1 whitespace-nowrap tracking-tighter sm:tracking-normal">
                        ì¶©ì „ìš© ê³¼ê¸ˆ <span id="arrow-billing-top" class="move-arrow text-red-500 font-black">Â»</span>
                    </button>
                </nav>
            </div>
            
            <div class="bg-red-950/10 border border-red-900/30 p-3 lg:p-4 rounded-lg flex items-start gap-2 text-left overflow-hidden text-left">
                <div class="text-red-500 mt-1 flex-none"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" class="lg:w-[18px] lg:h-[18px]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg></div>
                <p class="text-xs lg:text-sm text-neutral-400 leading-tight">
                    ë³¸ ê³„ì‚°ê¸°ëŠ” <span class="text-white font-bold underline decoration-red-700 uppercase tracking-tighter">íŒ¨ìŠ¤ / ì›”ê°„ ê´‘ê¸° 2ì¢… êµ¬ì…</span> ìƒíƒœë¥¼ ê¸°ë³¸ ì „ì œë¡œ ë™ì‘í•©ë‹ˆë‹¤.
                </p>
            </div>
        </header>

        <main class="w-full flex flex-col gap-6 text-left">
            <!-- ê³µí†µ ê¸°ì´ˆ ì„¤ì • ì„¹ì…˜ -->
            <section class="bg-neutral-900 border border-neutral-800 rounded-xl p-5 lg:p-8 shadow-2xl relative overflow-hidden">
                <div class="absolute top-0 left-0 w-1.5 lg:w-2 h-full bg-red-700 text-left"></div>
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 items-end text-left">
                    <div class="flex flex-col gap-3">
                        <label for="input-max-enk" class="flex items-center gap-2 cursor-pointer group text-left">
                            <span class="text-xs font-black text-neutral-500 uppercase tracking-widest leading-none">ì—”ì¼€íŒ”ë¦° ìµœëŒ€ì¹˜</span>
                            <span class="bg-red-700 text-[9px] px-1.5 py-0.5 rounded text-white font-bold animate-pulse uppercase">Edit</span>
                        </label>
                        <div class="flex items-center gap-1.5 text-left">
                            <button onclick="adjustValue('input-max-enk', -1)" class="adjust-btn flex-none">-</button>
                            <div class="relative flex-1 flex items-center justify-between bg-black border-2 border-red-900/30 group-hover:border-red-700 transition-all-200 h-[55px] lg:h-[60px] rounded-xl glow-red px-4 leading-none">
                                <input type="number" id="input-max-enk" min="60" max="300" value="120" inputmode="numeric" pattern="[0-9]*" onfocus="this.select()" class="bg-transparent text-2xl lg:text-3xl font-black text-white w-full outline-none focus:text-red-500 text-right">
                                <span class="text-red-800 font-bold text-lg italic ml-2">ENK</span>
                            </div>
                            <button onclick="adjustValue('input-max-enk', 1)" class="adjust-btn flex-none text-left">+</button>
                        </div>
                    </div>
                    <div class="flex flex-col gap-3">
                        <label for="input-enk-charges" class="flex items-center gap-2 cursor-pointer group text-left">
                            <span class="text-xs font-black text-neutral-500 uppercase tracking-widest leading-none text-left">ì¼ì¼ ê´‘ê¸° ì¶©ì „</span>
                            <span class="bg-red-700 text-[9px] px-1.5 py-0.5 rounded text-white font-bold animate-pulse uppercase">Edit</span>
                        </label>
                        <div class="flex items-center gap-1.5 text-left">
                            <button onclick="adjustValue('input-enk-charges', -1)" class="adjust-btn flex-none">-</button>
                            <div class="relative flex-1 flex items-center justify-between bg-black border-2 border-red-900/30 group-hover:border-red-700 transition-all-200 h-[55px] lg:h-[60px] rounded-xl glow-red px-4 leading-none text-right">
                                <input type="number" id="input-enk-charges" min="0" max="10" value="2" inputmode="numeric" pattern="[0-9]*" onfocus="this.select()" class="bg-transparent text-2xl lg:text-3xl font-black text-white w-full outline-none focus:text-red-500 text-right text-right">
                                <span class="text-red-800 font-bold text-lg italic ml-2">íšŒ</span>
                            </div>
                            <button onclick="adjustValue('input-enk-charges', 1)" class="adjust-btn flex-none text-left">+</button>
                        </div>
                    </div>

                    <!-- ë™ì  í† ê¸€ ì˜ì—­ -->
                    <div id="dynamic-toggle-area">
                        <div id="hard-mode-setting" class="flex flex-col gap-3 text-left">
                            <label class="flex items-center gap-4 cursor-pointer group leading-none text-xs lg:text-sm font-black transition-colors text-neutral-500 group-hover:text-neutral-300 uppercase tracking-widest text-left">
                                <input type="checkbox" id="input-is-hard" class="w-5 h-5 accent-red-600 bg-neutral-800 border-neutral-700 rounded cursor-pointer">
                                <span id="hard-label">ì£¼ê°„ ë³´ìƒ í•˜ë“œ ëª¨ë“œ ìˆ˜ë ¹</span>
                            </label>
                            <div class="flex gap-2 h-[55px] lg:h-[60px]">
                                <button id="btn-bulk" class="flex-1 flex flex-col justify-center items-center rounded-xl border-2 border-neutral-800 bg-neutral-950 transition-all-200 leading-none cursor-pointer">
                                    <span id="bulk-text" class="text-xs lg:text-sm font-black uppercase text-neutral-500 transition-all-200 text-left">3íšŒë¶„ ì¼ê´„ ìˆ˜ë ¹</span>
                                    <span class="text-[9px] lg:text-[10px] text-zinc-600 font-bold italic mt-1 uppercase tracking-tighter text-left">í•˜ë“œ 1íŒ ì†Œëª¨</span>
                                </button>
                                <button id="btn-each" class="flex-1 flex flex-col justify-center items-center rounded-xl border-2 border-neutral-800 bg-neutral-950 transition-all-200 leading-none cursor-pointer">
                                    <span id="each-text" class="text-xs lg:text-sm font-black uppercase text-neutral-500 transition-all-200 text-left">ê°ê° ìˆ˜ë ¹ (3íšŒ)</span>
                                    <span class="text-[9px] lg:text-[10px] text-zinc-600 font-bold italic mt-1 uppercase tracking-tighter text-left text-left">í•˜ë“œ 3íŒ ì†Œëª¨</span>
                                </button>
                            </div>
                        </div>
                        <div id="billing-mode-setting" class="hidden flex flex-col gap-3 text-left text-left">
                            <label id="first-bonus-label" class="flex items-center gap-4 cursor-pointer group leading-none text-xs lg:text-sm font-black transition-all-200 uppercase tracking-widest text-neutral-500 text-left">
                                <input type="checkbox" id="input-is-first" class="w-5 h-5 accent-orange-600 bg-neutral-800 border-neutral-700 rounded cursor-pointer">
                                <span>ìƒì  ì´ˆíšŒ ë³´ë„ˆìŠ¤ ìƒì¡´</span>
                            </label>
                            <div id="first-bonus-badge" class="cursor-pointer flex items-center justify-center bg-neutral-800/40 border-2 border-neutral-700/30 rounded-xl h-[55px] lg:h-[60px] transition-all-200 hover:border-orange-500/50">
                                <span class="text-[11px] lg:text-xs font-black uppercase tracking-widest text-neutral-500">First Purchase Logic</span>
                            </div>
                        </div>
                    </div>

                    <div class="flex flex-col gap-3 text-left text-left">
                        <div id="note-area-standard" class="flex flex-col gap-3 text-left">
                            <label class="text-xs font-black text-neutral-500 uppercase tracking-widest leading-none text-left">ì •ì‚° ë°©ì‹ ì•ˆë‚´</label>
                            <div class="p-3 lg:p-4 bg-red-950/10 border border-red-900/20 rounded-xl h-[55px] lg:h-[60px] flex items-center overflow-hidden leading-none text-left">
                                <p class="text-[10px] lg:text-xs text-neutral-400 leading-tight italic">
                                    <span class="text-red-700 font-bold uppercase mr-1">Note:</span> <span id="note-text">ì •ì‚° ë°©ì‹ ì•ˆë‚´ í‘œì‹œ...</span>
                                </p>
                            </div>
                        </div>
                        <div id="note-area-billing" class="hidden flex flex-col gap-3">
                            <label class="text-xs font-black text-neutral-500 uppercase tracking-widest leading-none text-left text-left">ì¶”ì²œ ì „ëµ í•„í„°</label>
                            <div class="flex gap-2 h-[55px] lg:h-[60px]">
                                <button id="btn-strat-cost" class="flex-1 flex flex-col justify-center items-center rounded-xl border-2 border-neutral-800 bg-neutral-950 transition-all-200 leading-none">
                                    <span class="text-[11px] lg:text-[13px] font-black uppercase text-neutral-500 transition-colors">ìµœì†Œ ê¸ˆì•¡ ìš°ì„ </span>
                                    <span class="text-[8px] lg:text-[9px] text-zinc-600 font-bold mt-1 uppercase tracking-tighter text-left">ê²°ì œì•¡ ìµœì†Œ</span>
                                </button>
                                <button id="btn-strat-eff" class="flex-1 flex flex-col justify-center items-center rounded-xl border-2 border-neutral-800 bg-neutral-950 transition-all-200 leading-none">
                                    <span class="text-[11px] lg:text-[13px] font-black uppercase text-neutral-500 transition-colors">ê°€ì„±ë¹„ ìš°ì„ </span>
                                    <span class="text-[8px] lg:text-[9px] text-zinc-600 font-bold mt-1 uppercase tracking-tighter text-left">ë‹¨ê°€ ìµœì €</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- íƒ­ 1: ì •ê°€ ì£¼ê¸° ê³„ì‚° -->
            <div id="content-cycle" class="tab-content active lg:grid-cols-3 gap-4 lg:gap-6 items-stretch">
                <section class="min-w-0">
                    <div class="bg-neutral-900 border border-neutral-800 rounded-xl p-5 lg:p-8 shadow-2xl relative overflow-hidden h-full flex flex-col text-left">
                        <div id="alert-area-eff" class="min-h-[45px] mb-4 flex flex-col justify-center text-center"></div>
                        <div class="flex-1 flex flex-col gap-6 text-left">
                            <div class="flex flex-col lg:flex-row items-center gap-6 text-left text-left">
                                <div class="hidden lg:flex flex-col items-center gap-3">
                                    <button onclick="adjustValue('input-daily-runs-v', 1)" class="adjust-btn w-10 h-10 bg-neutral-800 border border-neutral-700 rounded-lg text-white font-bold hover:bg-red-900 transition-colors text-xl">+</button>
                                    <input type="range" id="input-daily-runs-v" min="1" max="15" step="1" value="3" class="slider-vertical accent-red-700">
                                    <button onclick="adjustValue('input-daily-runs-v', -1)" class="adjust-btn w-10 h-10 bg-neutral-800 border border-neutral-700 rounded-lg text-white font-bold hover:bg-red-900 transition-colors text-xl">-</button>
                                </div>
                                <div class="flex-1 w-full space-y-5 text-left leading-none">
                                    <div class="flex flex-col text-left"><h2 class="text-xs font-black text-neutral-400 uppercase tracking-widest mb-1 leading-none text-left">ì¼ì¼ ê±°ë˜ ë¹ˆë„</h2><div class="flex items-baseline leading-none text-left"><span id="display-daily-runs" class="text-6xl lg:text-8xl font-black text-white tracking-tighter text-left">3</span><span class="text-red-700 font-black ml-2 text-2xl lg:text-3xl uppercase text-left">íšŒ</span></div></div>
                                    <div class="lg:hidden flex-1 flex items-center gap-2 bg-black/40 p-3 rounded-xl border border-neutral-800">
                                        <button onclick="adjustValue('input-daily-runs-m', -1)" class="adjust-btn h-8 w-8 text-xs flex-none">-</button>
                                        <input type="range" id="input-daily-runs-m" min="1" max="15" step="1" value="3" class="flex-1 horizontal-slider">
                                        <button onclick="adjustValue('input-daily-runs-m', 1)" class="adjust-btn h-8 w-8 text-xs flex-none">+</button>
                                    </div>
                                    <div class="bg-black/50 p-3 lg:p-4 rounded-xl border border-neutral-800 flex justify-between items-center shadow-inner leading-none text-left text-left">
                                        <span class="text-xs font-black text-neutral-500 uppercase tracking-widest text-left">ì¼ì¼ ì†Œëª¨</span>
                                        <div id="display-module-cost-eff" class="text-neutral-200 font-bold text-sm lg:text-base leading-none text-right"><span class="text-white font-black text-left text-left text-left text-left">15</span>ëª¨ë“ˆ <span class="text-xs ml-1 text-neutral-600 font-normal tracking-widest text-left text-left text-left">(300 ENK)</span></div>
                                    </div>
                                    <p id="display-available-modules-eff" class="text-[10px] lg:text-xs text-neutral-300 font-black tracking-tight text-right mt-2 drop-shadow-sm leading-none text-right">ë§¤ì¼ 24ê°œ ìˆ˜ê¸‰ ê°€ëŠ¥</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="min-w-0 text-left text-left">
                    <article class="bg-neutral-900 border border-neutral-800 p-6 flex flex-col rounded-xl shadow-lg h-full text-left">
                        <div class="flex items-center gap-3 mb-6 font-black text-neutral-500 text-xs uppercase tracking-widest italic text-left text-left text-left"><div class="w-1.5 h-4 bg-red-700 text-left text-left text-left text-left"></div>ì£¼ê°„ ê°€ë™ ë¶„ì„</div>
                        <div class="mb-6 p-4 bg-black/60 rounded-xl border border-neutral-800 text-xs space-y-3 font-mono flex-1 flex flex-col justify-center text-left text-left text-left text-left">
                            <div class="flex justify-between items-center text-sm leading-none"><span>ë³´ë„ˆìŠ¤ ì •ì‚°</span><span id="res-bonus-runs" class="text-red-500 font-bold">3íšŒ</span></div>
                            <div class="flex justify-between items-center text-sm leading-none text-left text-left text-left text-left"><span>ì¼ë°˜ ì •ì‚°</span><span id="res-normal-runs" class="text-neutral-300 font-bold text-left text-left">18íšŒ</span></div>
                            <div class="pt-3 border-t border-neutral-800 flex justify-between font-black uppercase tracking-tighter text-sm leading-none text-left text-left text-left text-left text-left"><span>ì£¼ê°„ ê°€ë™ ì´í•©</span><span id="res-total-runs" class="text-white underline underline-offset-4 decoration-red-900 font-black text-left text-left">21íšŒ</span></div>
                        </div>
                        <div class="space-y-4 text-left leading-none text-left">
                            <div class="flex justify-between items-end border-b border-neutral-800 pb-3 text-left text-left text-left text-left"><span class="text-xs font-black text-neutral-500 uppercase tracking-widest mb-1 text-left">ì£¼ê°„ í•©ì‚° ë ˆë²¨</span><span class="text-2xl lg:text-3xl font-black text-white text-left text-left text-left text-left text-left text-left"><span id="res-floored-levels">67</span><small class="text-xs font-normal ml-1 uppercase font-sans text-left text-left">LV</small></span></div>
                            <div class="flex justify-between items-end border-b border-neutral-800 pb-3 text-left text-left text-left text-left text-left text-left"><span class="text-xs font-black text-neutral-500 uppercase tracking-widest mb-1 text-left text-left text-left text-left">íŒŒí¸ ìƒì ìˆ˜ê¸‰</span><span class="text-2xl lg:text-3xl font-black text-red-600 text-left text-left text-left text-left text-left text-left text-left text-left"><span id="res-total-boxes-num">201</span><small class="text-xs font-normal ml-1 uppercase font-sans text-left text-left text-left">ea</small></span></div>
                            <div class="flex justify-between items-end pt-1 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"><span class="text-xs font-black text-neutral-500 uppercase tracking-widest mb-1 text-sm lg:text-base text-left text-left text-left text-left">íŒŒí¸ ìˆ˜ê¸‰ ê¸°ëŒ€ê°’</span><span class="text-2xl lg:text-3xl font-black text-yellow-500 tracking-tight font-sans text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"><span id="res-total-shards-num">402</span><small class="text-xs font-normal ml-1 uppercase font-sans text-left text-left text-left">ea</small></span></div>
                        </div>
                    </article>
                </section>
                <section class="min-w-0">
                    <article class="bg-neutral-900 border border-neutral-800 p-6 flex flex-col rounded-xl shadow-lg h-full justify-center text-center text-center text-center text-center text-center">
                        <div class="flex flex-col items-center py-4 flex-1 justify-center text-center text-center text-center text-center text-center">
                            <div class="space-y-2 text-center w-full">
                                <p class="text-xs lg:text-sm text-neutral-500 uppercase font-black tracking-widest leading-none text-center text-center text-center text-center text-center">ì •ê°€ ì£¼ê¸°</p>
                                <p class="text-[8px] lg:text-[9px] text-neutral-600 italic leading-tight font-bold text-center block w-full break-keep opacity-80 text-center text-center text-center text-center text-center text-center text-center text-center text-center">
                                    * ì¶”ì¶œ íŒŒí¸ ë° ëœë¤ ìƒì ë¯¸ê³ ë ¤<br>(ì‹¤ì œ ê°€ë™ íšŸìˆ˜ëŠ” ë” ì ì„ ìˆ˜ ìˆìŒ)
                                </p>
                                <div class="text-neutral-200 font-bold text-base leading-none text-center text-center text-center">ì•½ <span id="res-days-needed" class="text-red-500 text-4xl lg:text-5xl font-black underline underline-offset-8 decoration-red-800 leading-none text-center text-center text-center text-center text-center text-center">7.0</span>ì¼ ë§ˆë‹¤</div>
                                <p class="text-xs lg:text-sm text-neutral-400 font-black uppercase tracking-widest text-center leading-none text-center text-center text-center text-center">ì¸ê²©/ì—ê³  1ê°œ ì •ê°€ ê°€ëŠ¥</p>
                            </div>
                            <div class="w-full border-t border-neutral-800 pt-8 space-y-4 text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center"><p class="text-xs lg:text-sm text-neutral-500 font-black uppercase tracking-widest leading-none text-center text-center text-center text-center">ì£¼ê°„ ì •ì‚° ê²°ê³¼</p><div class="text-5xl lg:text-7xl font-black text-white tracking-tighter leading-none text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center"><span id="res-identity-count">1.01</span> <small class="text-xl text-neutral-600 font-normal ml-1 uppercase italic font-sans text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">ê°œ</small></div><p class="text-[11px] text-neutral-500 font-bold uppercase tracking-tighter leading-none text-center text-center text-center text-center">ì£¼ê°„ íšë“ ì¸ê²©/ì—ê³  ê°œìˆ˜</p></div>
                        </div>
                    </article>
                </section>
            </div>

            <!-- íƒ­ 2: íŒŒí¸ ëª¨ìœ¼ê¸° -->
            <div id="content-shard" class="tab-content hidden lg:grid-cols-3 gap-4 lg:gap-6 items-stretch text-left">
                <section class="min-w-0">
                    <article class="bg-neutral-900 border border-neutral-800 border-t-4 border-t-orange-500 rounded-xl p-5 shadow-2xl h-full flex flex-col text-left">
                        <div class="min-h-[30px] mb-4 flex flex-col justify-center text-xs font-black text-orange-400 uppercase tracking-widest leading-tight text-left text-left text-left text-left text-left text-left text-left text-left">ëª©í‘œ ì •ë³´ í™œì„±í™”</div>
                        <div class="flex flex-col gap-6 text-left flex-1 justify-center text-left text-left text-left text-left">
                            <div class="flex flex-col gap-2 group text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                                <label for="input-target-date" class="flex items-center gap-1.5 leading-none cursor-pointer text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"><span class="text-xs font-black text-neutral-400 uppercase tracking-widest text-left text-left">ì •ê°€ ë§ˆê°ì¼</span><span class="bg-red-700 text-[8px] px-1.5 py-0.5 rounded text-white font-bold animate-pulse uppercase leading-none text-left text-left text-left text-left text-left text-left text-left text-left">Edit</span></label>
                                <div class="input-box-container px-2 focus-within:border-red-700 text-left text-left text-left text-left text-left text-left text-left text-left text-left"><input type="date" id="input-target-date" class="bg-transparent w-full text-white font-black outline-none cursor-pointer text-sm text-left"></div>
                            </div>
                            <div class="flex flex-col gap-2 group text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                                <label for="input-current-boxes" class="flex items-center gap-1.5 leading-none cursor-pointer text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"><span class="text-xs font-black text-neutral-400 uppercase tracking-widest text-left text-left text-left text-left">ë³´ìœ  íŒŒí¸ ìƒì</span><span class="bg-red-700 text-[8px] px-1.5 py-0.5 rounded text-white font-bold animate-pulse uppercase leading-none text-left text-left text-left text-left text-left text-left text-left text-left">Edit</span></label>
                                <div class="flex items-center gap-1 text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                                    <button onclick="adjustValue('input-current-boxes', -1)" class="adjust-btn flex-none text-left text-left text-left">-</button>
                                    <div class="input-box-container flex-1">
                                        <input type="number" id="input-current-boxes" value="0" min="0" inputmode="numeric" pattern="[0-9]*" onfocus="this.select()" class="input-field pr-8 text-right text-right text-right text-right text-right text-right">
                                        <span class="input-unit text-yellow-600 text-right text-right text-right text-right text-right text-right text-right text-right text-right text-right">ê°œ</span>
                                    </div>
                                    <button onclick="adjustValue('input-current-boxes', 1)" class="adjust-btn flex-none text-left text-left text-left text-left text-left">+</button>
                                </div>
                            </div>
                            <div class="flex flex-col gap-2 group text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                                <label for="input-target-ids" class="flex items-center gap-1.5 leading-none cursor-pointer text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">ëª©í‘œ ì •ê°€ ê°œìˆ˜</label>
                                <div class="flex items-center gap-1 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                                    <button onclick="adjustValue('input-target-ids', -1)" class="adjust-btn flex-none text-left text-left text-left text-left text-left text-left text-left text-left">-</button>
                                    <div class="input-box-container flex-1">
                                        <input type="number" id="input-target-ids" value="1" min="1" max="100" inputmode="numeric" pattern="[0-9]*" onfocus="this.select()" class="input-field pr-8 text-right text-right text-right text-right text-right text-right text-right">
                                        <span class="input-unit text-red-700 text-right text-right text-right text-right text-right text-right text-right text-right text-right text-right text-right text-right text-right">ê°œ</span>
                                    </div>
                                    <button onclick="adjustValue('input-target-ids', 1)" class="adjust-btn flex-none text-left text-left text-left text-left text-left">+</button>
                                </div>
                            </div>
                        </div>
                    </article>
                </section>
                <section class="min-w-0 text-left">
                    <article class="bg-neutral-900 border border-neutral-800 p-6 flex flex-col rounded-xl shadow-lg border-t-4 border-t-red-700 h-full justify-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">
                        <h3 class="font-black text-red-600 text-xs lg:text-sm uppercase tracking-[0.2em] mb-6 italic leading-none text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">ì¼ì¼ í•„ìš” ê±°ë˜ ê°€ë™ íšŸìˆ˜</h3>
                        <p class="text-[11px] lg:text-xs text-neutral-400 uppercase mb-4 font-black leading-tight text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ì¼ì¼ í‰ê·  ìµœì†Œ íšŸìˆ˜</p>
                        <div class="mb-6 flex items-baseline justify-center gap-2 text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">
                            <span id="res-target-daily-runs-main" class="text-7xl lg:text-8xl font-black text-white tracking-tighter leading-none text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">0.0</span>
                            <span class="text-red-700 font-black text-2xl lg:text-4xl italic uppercase text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">íšŒ</span>
                        </div>
                        <div id="res-target-summary" class="bg-black/40 p-4 lg:p-5 rounded-xl border border-neutral-800 text-xs lg:text-sm text-neutral-400 font-mono leading-relaxed text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">ì˜¤ëŠ˜ë¶€í„° <span class="text-white underline decoration-red-900 font-black text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">0</span>ì¼ ë‚¨ì•˜ìŠµë‹ˆë‹¤.<br>ì´ <span class="text-white underline decoration-red-900 font-black text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">0</span>íšŒì˜ ì¶”ê°€ ê±°ë˜ í´ë¦¬ì–´ í•„ìš”</div>
                    </article>
                </section>
                <section class="min-w-0 text-left">
                    <article id="feasibility-card" class="bg-neutral-900 border border-neutral-800 border-t-4 border-t-green-600 p-5 lg:p-6 flex flex-col rounded-xl shadow-lg h-full justify-center text-center relative transition-all-200 text-center text-center text-center text-center text-center">
                        <div class="flex items-center justify-center gap-2 mb-4 italic leading-none text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">
                            <h3 class="font-black text-green-500 text-xs lg:text-sm uppercase tracking-[0.2em] text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">ê°€ë™ ê°€ëŠ¥ ì—¬ë¶€ íŒë³„</h3>
                            <div class="tooltip-container" id="tooltip-trigger">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" class="text-neutral-500 hover:text-white cursor-pointer transition-colors" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                                <div class="tooltip-box text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                                    <div class="space-y-3 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                                        <div class="text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                                            <p class="text-green-500 font-black text-[11px] uppercase mb-1 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">ì•ˆì • ê°€ë™ ë²”ìœ„</p>
                                            <p class="text-[10px] text-neutral-400 leading-normal text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">ë§¤ì¼ ê²½ë˜ 1íšŒ, ëˆë˜ 3íšŒ ìˆ˜í–‰ì„ ìœ„í•œ ëª¨ë“ˆ 9ê°œë¥¼ ë‚¨ê¸°ëŠ” ë³´ìˆ˜ì ì¸ ê¸°ì¤€ì…ë‹ˆë‹¤.</p>
                                        </div>
                                        <div class="border-t border-neutral-800 pt-3 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                                            <p class="text-red-500 font-black text-[11px] uppercase mb-1 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">ìµœëŒ€ ê°€ë™ í•œê³„</p>
                                            <p class="text-[10px] text-neutral-400 leading-normal text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">ì¼ì¼ í€˜ìŠ¤íŠ¸ ìˆ˜í–‰ë§Œ ë‚¨ê¸°ê³  <span class="text-white text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">ëª¨ë“  ì—”ì¼€íŒ”ë¦°ì„ ê±°ë˜ì— ìŸì•„ë¶“ëŠ”</span> ê·¹í•œì˜ ê¸°ì¤€ì…ë‹ˆë‹¤.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="feasibility-status-area" class="flex flex-col items-center gap-3 flex-1 justify-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">
                            <div id="feasibility-badge" class="px-4 py-1.5 rounded-full text-[10px] sm:text-xs font-black uppercase tracking-widest mb-2 leading-none text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">ë¶„ì„ ì¤‘</div>
                            <div id="feasibility-msg" class="text-lg lg:text-2xl font-black text-white leading-tight mb-2 text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”</div>
                            
                            <p class="text-[9px] lg:text-[10px] text-neutral-500 italic mb-4 opacity-80 leading-tight text-center block w-full px-4 break-keep text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">
                                * ì¶”ì¶œ íŒŒí¸ ë° ëœë¤ ìƒì ë³´ìƒì— ì˜í•´ ì‹¤ì œ ê°€ë™ ìš”êµ¬ì¹˜ëŠ” ì¤„ì–´ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            </p>

                            <div class="w-full grid grid-cols-1 gap-4 text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">
                                <div class="bg-black/50 p-4 rounded-xl border border-neutral-800 text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">
                                    <p class="text-[10px] lg:text-xs text-neutral-500 font-black uppercase mb-1.5 leading-none tracking-tighter text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">ì•ˆì • ê°€ë™ ë²”ìœ„ (ì¼ì¼ ì”ì—¬ ëª¨ë“ˆ 9+)</p>
                                    <div id="safe-limit-info" class="text-sm lg:text-lg text-neutral-200 font-bold leading-tight text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">ë¶„ì„ ëŒ€ê¸° ì¤‘...</div>
                                </div>
                                <div class="bg-red-950/10 p-4 rounded-xl border border-red-900/20 text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">
                                    <p class="text-[10px] lg:text-xs text-red-800 font-black uppercase mb-1.5 leading-none tracking-tighter text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">ìµœëŒ€ ê°€ë™ í•œê³„ (ì¼ì¼ ì”ì—¬ ëª¨ë“ˆ 5)</p>
                                    <div id="max-limit-info" class="text-sm lg:text-lg text-red-100 font-bold leading-tight text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">ë¶„ì„ ëŒ€ê¸° ì¤‘...</div>
                                </div>
                            </div>
                        </div>
                    </article>
                </section>
            </div>

            <!-- íƒ­ 3: ì¶©ì „ìš© ê³¼ê¸ˆ -->
            <div id="content-billing" class="tab-content hidden lg:grid-cols-3 gap-4 lg:gap-6 items-stretch text-left">
                <section class="min-w-0 text-left text-left">
                    <article class="bg-neutral-900 border border-neutral-800 p-6 flex flex-col rounded-xl shadow-lg h-full text-left border-t-4 border-t-yellow-600 text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                        <div class="flex justify-between items-center mb-6">
                            <div class="flex items-center gap-2 font-black text-neutral-500 text-xs uppercase tracking-widest italic text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                                <span>ìµœì  ìƒí’ˆ ì¶”ì²œ ì¡°í•©</span>
                                <!-- Tooltip Start -->
                                <div class="tooltip-container relative" id="billing-tooltip-trigger">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" class="text-neutral-500 hover:text-yellow-500 cursor-pointer transition-colors" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                                    <!-- Tooltip Box: Mobile gets fixed centering via CSS, Desktop gets absolute positioning via Tailwind classes -->
                                    <div class="tooltip-box md:bottom-full md:left-1/2 md:-translate-x-1/2 md:mb-2 md:w-64">
                                        <p class="text-[11px] text-yellow-100 leading-relaxed break-keep font-bold">
                                            <span class="text-yellow-500 block mb-1">ğŸ’¡ ë ˆë²¨ì—… ë³€ìˆ˜ ì•ˆë‚´</span>
                                            ê´€ë¦¬ì ë ˆë²¨ ìƒìŠ¹ ì‹œ ì—”ì¼€íŒ”ë¦°ì´ ìµœëŒ€ì¹˜ë§Œí¼ íšŒë³µë˜ë¯€ë¡œ, ì‹¤ì œ ê³¼ê¸ˆ í•„ìš”ëŸ‰ì€ ì´ ê³„ì‚° ê²°ê³¼ë³´ë‹¤ ì ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                        </p>
                                    </div>
                                </div>
                                <!-- Tooltip End -->
                            </div>
                            <div id="billing-total-price" class="text-orange-500 font-black text-sm lg:text-lg text-left text-left text-left text-left text-left text-left text-left">0ì›</div>
                        </div>
                        <div id="recommendation-list" class="flex-1 flex flex-col gap-3 overflow-y-auto max-h-[450px] lg:max-h-none text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                            <!-- JS ì˜ì—­ -->
                        </div>
                    </article>
                </section>
                <section class="min-w-0 text-left text-left">
                    <article class="bg-neutral-900 border border-neutral-800 p-6 flex flex-col rounded-xl shadow-lg h-full text-left border-t-4 border-t-blue-600 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                        <div class="flex items-center gap-3 mb-6 font-black text-neutral-500 text-xs uppercase tracking-widest italic text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">ì¶©ì „ëŸ‰ í†µê³„ ë¦¬í¬íŠ¸</div>
                        <div class="flex-1 flex flex-col justify-center gap-6 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                            <div class="flex justify-between items-center border-b border-neutral-800 pb-3 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                                <span class="text-xs text-neutral-500 w-36 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">ì¼ì¼ í•„ìš” ê´‘ê¸°</span>
                                <span id="stat-daily-lunacy" class="font-black text-blue-500 text-lg lg:text-xl text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">--</span>
                            </div>
                            <div class="flex justify-between items-center border-b border-neutral-800 pb-3 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                                <span class="text-xs text-neutral-500 w-36 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">ì¼ì¼ ì¶©ì „ ì—”ì¼€</span>
                                <span id="stat-daily-enk" class="font-black text-blue-400 text-lg lg:text-xl text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">--</span>
                            </div>
                            <div class="flex justify-between items-center pt-2 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                                <span class="text-xs text-neutral-500 w-36 text-left font-bold text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">ì›”ê°„ ì¶”ê°€ í•„ìš”ë¶„</span>
                                <span id="stat-net-deficit" class="font-black text-white text-lg lg:text-xl italic text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">--</span>
                            </div>
                        </div>
                    </article>
                </section>
                <section class="min-w-0 text-left text-left text-left text-left">
                    <article class="bg-neutral-900 border border-neutral-800 p-6 flex flex-col rounded-xl shadow-lg h-full justify-center border-t-4 border-t-red-700 text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">
                        <div class="flex items-center gap-3 mb-6 font-black text-neutral-500 text-xs uppercase tracking-widest italic text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">êµ¬ë§¤ ì „ëµ</div>
                        <div id="billing-runner-msg-area" class="flex-1 flex flex-col justify-center items-center gap-4 text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">
                            <div id="rec-runner-msg" class="text-sm lg:text-base font-black text-neutral-300 italic opacity-80 text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">--</div>
                            <div id="box-reduction-info" class="hidden bg-blue-950/20 border border-blue-900/40 p-3 rounded-lg w-full text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                                <p class="text-[10px] text-blue-300 font-bold mb-1 uppercase tracking-tighter">Enk. Package Impact</p>
                                <p id="box-reduction-text" class="text-[11px] text-neutral-400 leading-snug">--</p>
                            </div>
                            <p class="text-[10px] text-neutral-500 text-center leading-relaxed text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">ì›”ê°„ ê´‘ê¸° ìˆ˜ê¸‰ëŸ‰ ëŒ€ë¹„ ìµœì ì˜ ê²°ì œ ê²½ë¡œì…ë‹ˆë‹¤.</p>
                        </div>
                    </article>
                </section>
            </div>
            
            <div class="lg:hidden mt-4 flex justify-center pb-8 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                <nav class="flex bg-neutral-900 p-1 rounded-lg tab-highlight mx-auto relative text-left text-left text-left text-left text-left text-left text-left">
                    <button onclick="switchTab('cycle')" id="tab-btn-cycle-bottom" class="relative px-3 py-2.5 text-[9.5px] font-black rounded-md transition-all-200 bg-red-800 text-white z-10 whitespace-nowrap tracking-tighter">ì •ê°€ ì£¼ê¸°</button>
                    <button onclick="switchTab('shard')" id="tab-btn-shard-bottom" class="relative px-3 py-2.5 text-[9.5px] font-black rounded-md transition-all-200 text-neutral-500 z-10 flex items-center gap-1 whitespace-nowrap tracking-tighter text-left text-left text-left text-left">
                        íŒŒí¸ ëª¨ìœ¼ê¸° <span id="arrow-shard-bottom" class="move-arrow text-red-500 font-black text-left text-left text-left">Â»</span>
                    </button>
                    <button onclick="switchTab('billing')" id="tab-btn-billing-bottom" class="relative px-3 py-2.5 text-[9.5px] font-black rounded-md transition-all-200 text-neutral-500 z-10 flex items-center gap-1 whitespace-nowrap tracking-tighter text-left text-left text-left text-left text-left text-left text-left text-left">
                        ì¶©ì „ìš© ê³¼ê¸ˆ <span id="arrow-billing-bottom" class="move-arrow text-red-500 font-black text-left text-left text-left text-left text-left text-left text-left text-left">Â»</span>
                    </button>
                </nav>
            </div>
        </main>
        
        <footer class="mt-8 lg:mt-20 text-center border-t border-neutral-900 pt-10 mb-10 text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">
            <p class="text-[10px] text-zinc-800 uppercase tracking-[0.6em] font-black italic opacity-40 uppercase text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">Authorized Intelligence Unit - Sazabi Custom</p>
        </footer>
    </div>

    <script>
        // --- Billing Constants ---
        const REFILL_COSTS = [0, 26, 78, 156, 260, 390, 546, 728, 936, 1170, 1430];
        const NON_FIRST_RATIO = 0.1565; 
        const BASE_MONTHLY_LUNACY = 3900; 

        const PRODUCTS = [
            { id: 'weekly_box', name: 'ì£¼ê°„ ì—”ì¼€íŒ”ë¦° íŒ¨í‚¤ì§€', enk_fixed: 1200, price: 9900, type: 'weekly', limit: 4, detail: '20ë°•ìŠ¤ (1200 ENK)' },
            { id: 'raw_6', base: 8336, price: 110000, name: 'ê´‘ê¸° ëª¨ìŒ', type: 'raw' },
            { id: 'raw_5', base: 4103, price: 55000, name: 'ê´‘ê¸° ë”ë¯¸', type: 'raw' },
            { id: 'raw_4', base: 2147, price: 33000, name: 'ê´‘ê¸° ìƒì', type: 'raw' },
            { id: 'raw_3', base: 1014, price: 17000, name: 'ê´‘ê¸° ë‹¤ë°œ', type: 'raw' },
            { id: 'raw_2', base: 294, price: 5100, name: 'ê´‘ê¸° ë¬¶ìŒ', type: 'raw' },
            { id: 'raw_1', base: 70, price: 1100, name: 'ê´‘ê¸°', type: 'raw' }
        ];

        // --- State Management ---
        const STORAGE_KEYS = { DAILY_RUNS: 'lcb_remaster_dailyRuns', MAX_ENK: 'lcb_remaster_maxEnk', ENK_CHARGES: 'lcb_remaster_enkCharges', IS_HARD: 'lcb_remaster_isHard', HARD_STYLE: 'lcb_remaster_hardStyle', TARGET_DATE: 'lcb_remaster_targetDate', TARGET_IDS: 'lcb_remaster_targetIds', CURRENT_BOXES: 'lcb_remaster_currentBoxes', ACTIVE_TAB: 'lcb_remaster_activeTab', IS_FIRST: 'lcb_remaster_isFirst', BILL_STRAT: 'lcb_remaster_billStrat' };
        function safeSave(key, value) { try { localStorage.setItem(key, value); } catch (e) {} }
        function safeGet(key, defaultValue) { try { const val = localStorage.getItem(key); return val !== null ? val : defaultValue; } catch (e) { return defaultValue; } }

        let dailyRuns = parseInt(safeGet(STORAGE_KEYS.DAILY_RUNS, "3"));
        let maxEnk = parseInt(safeGet(STORAGE_KEYS.MAX_ENK, "120"));
        let enkCharges = parseInt(safeGet(STORAGE_KEYS.ENK_CHARGES, "2"));
        let isHard = safeGet(STORAGE_KEYS.IS_HARD, "false") === "true";
        let isFirst = safeGet(STORAGE_KEYS.IS_FIRST, "true") === "true";
        let hardStyle = safeGet(STORAGE_KEYS.HARD_STYLE, "bulk");
        let activeTab = safeGet(STORAGE_KEYS.ACTIVE_TAB, "cycle");
        let billStrat = safeGet(STORAGE_KEYS.BILL_STRAT, "cost");
        
        let targetIds = parseInt(safeGet(STORAGE_KEYS.TARGET_IDS, "1"));
        let currentBoxes = parseInt(safeGet(STORAGE_KEYS.CURRENT_BOXES, "0"));
        const dDate = new Date(); dDate.setDate(dDate.getDate() + 14);
        let targetDate = safeGet(STORAGE_KEYS.TARGET_DATE, dDate.toISOString().split('T')[0]);

        const BOXES_PER_LEVEL = 3; const SHARDS_PER_BOX = 2; const IDENTITY_COST = 400; const MD_NORMAL_LV = 3; const ENK_PER_MODULE = 20; const MODULE_PER_RUN = 5;

        // --- Core Helpers ---
        window.switchTab = function(tab) {
            const tabs = ['cycle', 'shard', 'billing'];
            tabs.forEach(t => {
                const el = document.getElementById(`content-${t}`);
                if(el) { if(t === tab) { el.classList.remove('hidden'); el.classList.add('active'); } else { el.classList.add('hidden'); el.classList.remove('active'); } }
            });
            const allBtns = document.querySelectorAll('nav button');
            allBtns.forEach(b => { b.classList.remove('bg-red-800', 'text-white'); b.classList.add('text-neutral-500'); });
            const topB = document.getElementById(`tab-btn-${tab}-top`); if(topB) topB.classList.add('bg-red-800', 'text-white');
            const botB = document.getElementById(`tab-btn-${tab}-bottom`); if(botB) botB.classList.add('bg-red-800', 'text-white');
            
            tabs.forEach(t => {
                const topA = document.getElementById(`arrow-${t}-top`); const botA = document.getElementById(`arrow-${t}-bottom`);
                if(t === tab) { if(topA) topA.style.display='none'; if(botA) botA.style.display='none'; }
                else { if(topA) topA.style.display='inline-block'; if(botA) botA.style.display='inline-block'; }
            });

            if(tab === 'billing') {
                document.getElementById('hard-mode-setting').classList.add('hidden'); document.getElementById('billing-mode-setting').classList.remove('hidden');
                document.getElementById('note-area-standard').classList.add('hidden'); document.getElementById('note-area-billing').classList.remove('hidden');
            } else {
                document.getElementById('hard-mode-setting').classList.remove('hidden'); document.getElementById('billing-mode-setting').classList.add('hidden');
                document.getElementById('note-area-standard').classList.remove('hidden'); document.getElementById('note-area-billing').classList.add('hidden');
            }
            safeSave(STORAGE_KEYS.ACTIVE_TAB, tab);
            window.scrollTo({ top: 0, behavior: 'smooth' });
            updateAll();
        };

        window.adjustValue = function(id, delta) {
            let targetId = id;
            if (id.includes('daily-runs')) { targetId = window.innerWidth >= 1024 ? 'input-daily-runs-v' : 'input-daily-runs-m'; }
            const input = document.getElementById(targetId);
            if(!input) return;
            let val = parseInt(input.value) || 0;
            val += delta;
            if(val < (parseInt(input.min) || 0)) val = parseInt(input.min) || 0;
            if(val > (parseInt(input.max) || 9999)) val = parseInt(input.max) || 9999;
            input.value = val;
            if(id === 'input-max-enk') { maxEnk = val; safeSave(STORAGE_KEYS.MAX_ENK, val); }
            if(id === 'input-enk-charges') { enkCharges = val; safeSave(STORAGE_KEYS.ENK_CHARGES, val); }
            if(id === 'input-current-boxes') { currentBoxes = val; safeSave(STORAGE_KEYS.CURRENT_BOXES, val); }
            if(id === 'input-target-ids') { targetIds = val; safeSave(STORAGE_KEYS.TARGET_IDS, val); }
            if(id.includes('daily-runs')) { dailyRuns = val; safeSave(STORAGE_KEYS.DAILY_RUNS, dailyRuns); }
            updateAll();
        };

        function updateEffUI() {
            const weeklyRuns = dailyRuns * 7;
            const questLevels = 9;
            let mdBonusLevels = (isHard ? (hardStyle === 'bulk' ? 22.5 : 25) : 3 * 4.5);
            let bonusRunsCount = (isHard ? (hardStyle === 'bulk' ? 1 : 3) : Math.min(weeklyRuns, 3));
            const totalWeeklyLevels = questLevels + mdBonusLevels + (Math.max(0, weeklyRuns - bonusRunsCount) * MD_NORMAL_LV);
            const totalDailyModules = Math.floor((240 + maxEnk * enkCharges) / ENK_PER_MODULE);
            const dailyMDModules = dailyRuns * MODULE_PER_RUN;
            const remainingModules = totalDailyModules - dailyMDModules;

            document.getElementById('display-daily-runs').textContent = dailyRuns;
            document.getElementById('display-module-cost-eff').innerHTML = `<span class="text-white font-black">${dailyMDModules}</span>ëª¨ë“ˆ <span class="text-xs ml-1 text-neutral-600 font-normal tracking-widest text-left text-left">(${dailyMDModules * ENK_PER_MODULE} ENK)</span>`;
            document.getElementById('display-available-modules-eff').textContent = `ë§¤ì¼ ${totalDailyModules}ê°œ ìˆ˜ê¸‰ ê°€ëŠ¥ (ì¶©ì „ í¬í•¨)`;
            
            const floorLv = Math.floor(totalWeeklyLevels);
            document.getElementById('res-floored-levels').textContent = floorLv;
            document.getElementById('res-total-boxes-num').textContent = floorLv * BOXES_PER_LEVEL;
            document.getElementById('res-total-shards-num').textContent = floorLv * BOXES_PER_LEVEL * SHARDS_PER_BOX;
            document.getElementById('res-identity-count').textContent = (floorLv * BOXES_PER_LEVEL * SHARDS_PER_BOX / IDENTITY_COST).toFixed(2);
            document.getElementById('res-days-needed').textContent = (IDENTITY_COST / (floorLv * BOXES_PER_LEVEL * SHARDS_PER_BOX / 7 || 1)).toFixed(1);

            const alertArea = document.getElementById('alert-area-eff');
            if (alertArea) {
                if (remainingModules < 0) { alertArea.innerHTML = `<div class="bg-red-950/40 border border-red-600 p-2 rounded-lg animate-pulse text-[10px] sm:text-xs font-black text-red-100 text-center leading-none text-left">! [ê³µê¸‰ í•œê³„ ë„ë‹¬] ì¼ì¼ ëª¨ë“ˆ ìˆ˜ê¸‰ëŸ‰ ì´ˆê³¼</div>`; }
                else if (remainingModules <= 8) { alertArea.innerHTML = `<div class="bg-orange-950/20 border border-orange-700/40 p-2 rounded-lg text-[10px] sm:text-xs font-black text-orange-200 text-center leading-none text-left text-left">! í™•ì¸: ê²½ë˜/ëˆë˜ ê°€ë™ ê³„íš ì ê²€</div>`; }
                else { alertArea.innerHTML = ''; }
            }

            if(document.getElementById('note-text')) {
                document.getElementById('note-text').textContent = isHard ? (hardStyle === 'bulk' ? "'ì¼ê´„ ìˆ˜ë ¹' ì‹œ ë³´ë„ˆìŠ¤ 3íšŒë¶„ì„ í•˜ë“œ 1íŒì— ì •ì‚°í•˜ì—¬ íš¨ìœ¨ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤." : "'ê°ê° ìˆ˜ë ¹' ì‹œ í•˜ë“œ ê±°ë˜ì„ 3íšŒ ì§ì ‘ í´ë¦¬ì–´í•˜ì—¬ ê²½í—˜ì¹˜ë¥¼ ì •ì‚°í•©ë‹ˆë‹¤.") : "í˜„ì¬ í•˜ë“œ ë³´ë„ˆìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì¼ë°˜ ê±°ë˜ ë³´ë„ˆìŠ¤ë§Œ ì ìš© ì¤‘ì…ë‹ˆë‹¤.";
            }

            const bBulk = document.getElementById('btn-bulk'); const bEach = document.getElementById('btn-each');
            if(isHard) {
                bBulk.classList.remove('disabled-btn'); bBulk.style.borderColor = hardStyle === 'bulk' ? '#b91c1c' : '#262626';
                bEach.classList.remove('disabled-btn'); bEach.style.borderColor = hardStyle === 'each' ? '#b91c1c' : '#262626';
                document.getElementById('bulk-text').className = hardStyle === 'bulk' ? "text-xs lg:text-sm font-black text-red-500" : "text-xs lg:text-sm font-black text-neutral-500";
                document.getElementById('each-text').className = hardStyle === 'each' ? "text-xs lg:text-sm font-black text-red-500" : "text-xs lg:text-sm font-black text-neutral-500";
            } else { 
                bBulk.classList.add('disabled-btn'); bEach.classList.add('disabled-btn'); 
                document.getElementById('bulk-text').className = "text-xs lg:text-sm font-black text-neutral-500";
                document.getElementById('each-text').className = "text-xs lg:text-sm font-black text-neutral-500";
                bBulk.style.borderColor = '#262626';
                bEach.style.borderColor = '#262626';
            }
            document.getElementById('res-bonus-runs').textContent = `${isHard ? (hardStyle === 'bulk' ? 1 : 3) : Math.min(weeklyRuns, 3)}íšŒ`;
            document.getElementById('res-normal-runs').textContent = `${Math.max(0, weeklyRuns - (isHard ? (hardStyle === 'bulk' ? 1 : 3) : Math.min(weeklyRuns, 3)))}íšŒ`;
            document.getElementById('res-total-runs').textContent = `${weeklyRuns}íšŒ ê°€ë™`;
        }

        function updateBillingUI() {
            let totalEnkNeeded = 30 * enkCharges * maxEnk;
            let totalDailyLunacyReq = 0;
            for(let i=1; i<=enkCharges; i++) totalDailyLunacyReq += REFILL_COSTS[i];

            let monthlyRefillCosts = [];
            for(let d=0; d<30; d++) {
                for(let c=1; c<=enkCharges; c++) {
                    let cost = REFILL_COSTS[c] - REFILL_COSTS[c-1];
                    monthlyRefillCosts.push(cost);
                }
            }
            monthlyRefillCosts.sort((a,b) => a-b);

            function solveGreedy(needed, sortFunc) {
                if (needed <= 0) return { price: 0, cart: [] };
                let pool = [];
                PRODUCTS.forEach(p => {
                    if(p.type === 'raw') {
                        if(isFirst) pool.push({ ...p, name: p.name + " (ì´ˆíšŒ)", qty: p.base*2, first: true, realId: p.id+'_1st' });
                        pool.push({ ...p, qty: Math.floor(p.base * 1.1565), first: false, realId: p.id+'_std' });
                    }
                });
                
                let sortedPool = [...pool].sort(sortFunc);
                let cart = [];
                let currentNeeded = needed;
                let currentPrice = 0;
                let usedFirsts = new Set();

                while (currentNeeded > 0) {
                    let item = sortedPool.find(p => !p.first || !usedFirsts.has(p.realId));
                    if (!item) break; 
                    
                    cart.push(item);
                    currentPrice += item.price;
                    currentNeeded -= item.qty;
                    if (item.first) usedFirsts.add(item.realId);
                }
                return { price: currentPrice, cart: cart };
            }

            function getMinLunacyPrice(needed, strat) {
                const resEff = solveGreedy(needed, (a, b) => (b.qty / b.price) - (a.qty / a.price));
                if (strat === 'eff') return resEff;

                const resCheapest = solveGreedy(needed, (a, b) => a.price - b.price);
                const resLargest = solveGreedy(needed, (a, b) => b.qty - a.qty);

                let pool = [];
                PRODUCTS.forEach(p => {
                    if(p.type === 'raw') {
                        if(isFirst) pool.push({ ...p, name: p.name + " (ì´ˆíšŒ)", qty: p.base*2, first: true, realId: p.id+'_1st' });
                        pool.push({ ...p, qty: Math.floor(p.base * 1.1565), first: false, realId: p.id+'_std' });
                    }
                });
                let oneBigOptions = pool.filter(p => p.qty >= needed);
                let resOneBig = { price: Infinity, cart: [] };
                if (oneBigOptions.length > 0) {
                     oneBigOptions.sort((a,b) => a.price - b.price);
                     resOneBig = { price: oneBigOptions[0].price, cart: [oneBigOptions[0]] };
                }

                let candidates = [resEff, resCheapest, resLargest, resOneBig];
                return candidates.sort((a, b) => a.price - b.price)[0];
            }

            let weeklyPackLimit = PRODUCTS.find(p => p.type === 'weekly').limit; 
            let bestScenario = null; 

            for(let packCount=0; packCount<=weeklyPackLimit; packCount++) {
                let currentPackCost = packCount * 9900;
                let enkFromPacks = packCount * 1200;
                
                let remainingEnkNeeded = Math.max(0, totalEnkNeeded - enkFromPacks);
                let refillsNeeded = Math.ceil(remainingEnkNeeded / maxEnk);
                
                let lunacyNeededForRefills = 0;
                for(let i=0; i<refillsNeeded; i++) {
                    if (i < monthlyRefillCosts.length) {
                        lunacyNeededForRefills += monthlyRefillCosts[i];
                    }
                }

                let netLunacyDeficit = Math.max(0, lunacyNeededForRefills - BASE_MONTHLY_LUNACY);
                let lunacySol = getMinLunacyPrice(netLunacyDeficit, billStrat);
                let totalScenCost = currentPackCost + lunacySol.price;

                if (!bestScenario || totalScenCost < bestScenario.cost) {
                    bestScenario = {
                        cost: totalScenCost,
                        packs: packCount,
                        lunacyCart: lunacySol.cart,
                        lunacyNeeded: netLunacyDeficit
                    };
                }
            }

            let grouped = [];
            
            if (bestScenario.packs > 0) {
                grouped.push({
                    name: 'ì£¼ê°„ ì—”ì¼€íŒ”ë¦° íŒ¨í‚¤ì§€',
                    count: bestScenario.packs,
                    detail: `ì´ ${bestScenario.packs * 1200} ENK ëŒ€ì²´`,
                    price: 9900
                });
            }
            
            bestScenario.lunacyCart.forEach(c => {
                let ex = grouped.find(g => g.name === c.name);
                if(ex) ex.count++;
                else grouped.push({ ...c, count: 1 });
            });

            const recL = document.getElementById('recommendation-list');
            recL.innerHTML = '';
            
            if(grouped.length === 0) {
                recL.innerHTML = '<div class="text-neutral-500 italic text-center py-10">ì¶”ê°€ ê³¼ê¸ˆ ì—†ì´ ì›”ê°„ ê´‘ê¸° ìˆ˜ê¸‰ëŸ‰ë§Œìœ¼ë¡œ ì¶©ì „ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>';
            } else {
                grouped.forEach(item => {
                    const card = document.createElement('div');
                    card.className = "bg-black/40 border border-neutral-800 p-4 rounded-xl flex justify-between items-center";
                    card.innerHTML = `
                        <div class="flex flex-col gap-1 min-w-0 flex-1">
                            <div class="flex items-center gap-2 w-full">
                                <span class="text-xs sm:text-sm lg:text-base font-black text-white italic truncate block flex-1 text-left" title="${item.name}">${item.name}</span>
                                <span class="bg-red-900/40 text-red-500 text-[10px] font-bold px-1.5 py-0.5 rounded leading-none flex-none text-left">X${item.count}</span>
                            </div>
                            <span class="text-[9px] text-neutral-500 text-left">${item.detail || (Math.floor(item.qty) + ' ê´‘ê¸°')}</span>
                        </div>
                        <div class="text-right flex-none ml-4 text-left text-left">
                            <div class="text-orange-500 font-black text-xs sm:text-base lg:text-lg text-left">${(item.price * item.count).toLocaleString()}ì›</div>
                        </div>
                    `;
                    recL.appendChild(card);
                });
            }

            document.getElementById('billing-total-price').textContent = bestScenario.cost.toLocaleString() + "ì›";
            document.getElementById('stat-daily-lunacy').textContent = `${totalDailyLunacyReq}ê°œ`;
            document.getElementById('stat-daily-enk').textContent = `${totalEnkNeeded} ENK`;
            document.getElementById('stat-net-deficit').textContent = `${Math.ceil(Math.max(0, bestScenario.lunacyNeeded))}ê°œ`;
            document.getElementById('rec-runner-msg').textContent = bestScenario.cost > 0 ? "êµ¬ë§¤ ì¡°í•© ë¶„ì„ ì™„ë£Œ" : "ì•ˆì •ì ì¸ ì¶©ì „ ê¶¤ë„";

            const bEff = document.getElementById('btn-strat-eff');
            const bCost = document.getElementById('btn-strat-cost');
            bEff.style.borderColor = billStrat === 'eff' ? '#b91c1c' : '#262626';
            bEff.querySelector('span:first-child').style.color = billStrat === 'eff' ? '#ef4444' : '#737373';
            bCost.style.borderColor = billStrat === 'cost' ? '#b91c1c' : '#262626';
            bCost.querySelector('span:first-child').style.color = billStrat === 'cost' ? '#ef4444' : '#737373';
            
            const boxArea = document.getElementById('box-reduction-info');
            const boxText = document.getElementById('box-reduction-text');
            if(bestScenario.packs > 0) {
                boxArea.classList.remove('hidden');
                boxText.innerHTML = `ì—”ì¼€íŒ”ë¦° íŒ¨í‚¤ì§€ ${bestScenario.packs}ê°œ(${bestScenario.packs*1200} ENK)ê°€<br><span class="text-white">ì›”ê°„ í•„ìš”ëŸ‰ì˜ ${(bestScenario.packs * 1200 / totalEnkNeeded * 100).toFixed(1)}%</span>ë¥¼ ëŒ€ì²´í–ˆìŠµë‹ˆë‹¤.`;
            } else { boxArea.classList.add('hidden'); }

            const fLabel = document.getElementById('first-bonus-label'); const fBadge = document.getElementById('first-bonus-badge');
            if(isFirst) {
                fLabel.className = "flex items-center gap-4 cursor-pointer group leading-none text-xs lg:text-sm font-black transition-all-200 uppercase tracking-widest text-orange-500 text-left text-left";
                fBadge.className = "cursor-pointer flex items-center justify-center bg-orange-950/20 border-2 border-orange-900 rounded-xl h-[55px] lg:h-[60px] text-left text-left hover:border-orange-500/50";
                fBadge.querySelector('span').className = "text-[11px] lg:text-xs font-black uppercase tracking-widest text-orange-400";
            } else {
                fLabel.className = "flex items-center gap-4 cursor-pointer group leading-none text-xs lg:text-sm font-black transition-all-200 uppercase tracking-widest text-neutral-500 text-left text-left";
                fBadge.className = "cursor-pointer flex items-center justify-center bg-neutral-800/40 border-2 border-neutral-700/30 rounded-xl h-[55px] lg:h-[60px] hover:border-neutral-500/50";
                fBadge.querySelector('span').className = "text-[11px] lg:text-xs font-black text-neutral-500 uppercase";
            }
        }

        function updateShardUI() {
            const today = new Date(); today.setHours(0, 0, 0, 0);
            const goalDate = new Date(targetDate); goalDate.setHours(0, 0, 0, 0);
            const diffDays = Math.max(1, Math.ceil((goalDate - today) / (1000 * 60 * 60 * 24)));
            const totalDailyModules = Math.floor((240 + maxEnk * enkCharges) / ENK_PER_MODULE);
            const currentShardsOwned = currentBoxes * SHARDS_PER_BOX;
            const totalNeeded = Math.max(0, (targetIds * IDENTITY_COST) - currentShardsOwned);
            const passiveLv = (1 * diffDays) + (2 * Math.floor(diffDays/7));
            let bonusLv = (isHard ? (hardStyle === 'bulk' ? 22.5 : 25) : 13.5) * (diffDays/7);
            const normalLvNeeded = Math.max(0, (totalNeeded / (BOXES_PER_LEVEL * SHARDS_PER_BOX)) - passiveLv - bonusLv);
            const dailyRunsReq = (normalLvNeeded / MD_NORMAL_LV) / diffDays;
            
            document.getElementById('res-target-daily-runs-main').textContent = dailyRunsReq.toFixed(1);
            
            const badge = document.getElementById('feasibility-badge'); const msg = document.getElementById('feasibility-msg');
            if(badge && msg) {
                const safeD = (totalDailyModules - 9) / MODULE_PER_RUN;
                const maxD = (totalDailyModules - 5) / MODULE_PER_RUN;
                const bB = "px-4 py-1.5 rounded-full text-[10px] sm:text-xs font-black uppercase tracking-widest text-center mb-2 leading-none text-left";
                if (dailyRunsReq <= safeD) { badge.className = `${bB} bg-green-900/40 text-green-400`; badge.textContent = "ì•ˆì • ê°€ë™ ê°€ëŠ¥"; msg.innerHTML = `<span class="text-green-400 text-center text-left">ì—¬ìœ ë¡œì›€</span>`; }
                else if (dailyRunsReq <= maxD) { badge.className = `${bB} bg-orange-900/40 text-orange-400`; badge.textContent = "ê°€ë™ í•œê³„ ê·¼ì ‘"; msg.innerHTML = `<span class="text-orange-400 text-center text-center text-center text-center text-center text-center text-left">ë¬´ë¦¬í•œ ì¼ì •</span>`; }
                else { badge.className = `${bB} bg-red-900/40 text-red-500`; badge.textContent = "ëª©í‘œ ë‹¬ì„± ë¶ˆê°€"; msg.innerHTML = `<span class="text-red-500 text-center text-center text-center text-center text-center text-center text-center text-center text-left">ê³µê¸‰ í•œê³„ ì´ˆê³¼</span>`; }
                document.getElementById('safe-limit-info').textContent = `ì¼ì¼ í‰ê·  ${safeD.toFixed(1)}íšŒ ê°€ëŠ¥`;
                document.getElementById('max-limit-info').textContent = `ì¼ì¼ í‰ê·  ${maxD.toFixed(1)}íšŒ ê°€ëŠ¥`;
            }
            document.getElementById('res-target-summary').innerHTML = `ì˜¤ëŠ˜ë¶€í„° <span class="text-white underline decoration-red-900 font-black">${diffDays}</span>ì¼ ë‚¨ì•˜ìŠµë‹ˆë‹¤.<br>ì´ <span class="text-white underline decoration-red-900 font-black">${Math.ceil(normalLvNeeded/MD_NORMAL_LV)}</span>íšŒì˜ ì¶”ê°€ ê±°ë˜ í´ë¦¬ì–´ í•„ìš”`;
        }

        function updateAll() { updateEffUI(); updateBillingUI(); updateShardUI(); }

        window.onload = () => {
            document.getElementById('input-max-enk').value = maxEnk;
            document.getElementById('input-enk-charges').value = enkCharges;
            document.getElementById('input-is-hard').checked = isHard;
            document.getElementById('input-is-first').checked = isFirst;
            document.getElementById('input-target-date').value = targetDate;
            document.getElementById('input-target-ids').value = targetIds;
            document.getElementById('input-current-boxes').value = currentBoxes;

            document.getElementById('input-max-enk').addEventListener('input', (e) => { maxEnk = parseInt(e.target.value) || 0; safeSave(STORAGE_KEYS.MAX_ENK, maxEnk); updateAll(); });
            document.getElementById('input-enk-charges').addEventListener('input', (e) => { enkCharges = parseInt(e.target.value) || 0; safeSave(STORAGE_KEYS.ENK_CHARGES, enkCharges); updateAll(); });
            
            // Hard Mode Toggle Logic
            document.getElementById('input-is-hard').addEventListener('change', (e) => { 
                isHard = e.target.checked; 
                safeSave(STORAGE_KEYS.IS_HARD, isHard); 
                updateAll(); 
            });
            
            const handleHardModeToggle = (style) => {
                if (!isHard) {
                    isHard = true;
                    hardStyle = style;
                } else if (hardStyle === style) {
                    isHard = false;
                } else {
                    hardStyle = style;
                }
                document.getElementById('input-is-hard').checked = isHard;
                safeSave(STORAGE_KEYS.IS_HARD, isHard);
                safeSave(STORAGE_KEYS.HARD_STYLE, hardStyle);
                updateAll();
            };

            document.getElementById('btn-bulk').onclick = () => handleHardModeToggle('bulk');
            document.getElementById('btn-each').onclick = () => handleHardModeToggle('each');

            // First Purchase Toggle Logic
            document.getElementById('input-is-first').addEventListener('change', (e) => { 
                isFirst = e.target.checked; 
                safeSave(STORAGE_KEYS.IS_FIRST, isFirst); 
                updateAll(); 
            });

            document.getElementById('first-bonus-badge').onclick = () => {
                isFirst = !isFirst;
                document.getElementById('input-is-first').checked = isFirst;
                safeSave(STORAGE_KEYS.IS_FIRST, isFirst);
                updateAll();
            };

            document.getElementById('btn-strat-eff').onclick = () => { billStrat = 'eff'; safeSave(STORAGE_KEYS.BILL_STRAT, 'eff'); updateAll(); };
            document.getElementById('btn-strat-cost').onclick = () => { billStrat = 'cost'; safeSave(STORAGE_KEYS.BILL_STRAT, 'cost'); updateAll(); };
            document.getElementById('input-target-date').addEventListener('input', (e) => { targetDate = e.target.value; safeSave(STORAGE_KEYS.TARGET_DATE, targetDate); updateAll(); });
            document.getElementById('input-target-ids').addEventListener('input', (e) => { targetIds = parseInt(e.target.value) || 1; safeSave(STORAGE_KEYS.TARGET_IDS, targetIds); updateAll(); });
            document.getElementById('input-current-boxes').addEventListener('input', (e) => { currentBoxes = parseInt(e.target.value) || 0; safeSave(STORAGE_KEYS.CURRENT_BOXES, currentBoxes); updateAll(); });

            const ttTrigger = document.getElementById('tooltip-trigger');
            if(ttTrigger) { ttTrigger.addEventListener('click', (e) => { e.stopPropagation(); ttTrigger.classList.toggle('active'); }); }
            
            const billTtTrigger = document.getElementById('billing-tooltip-trigger');
            if(billTtTrigger) { 
                billTtTrigger.addEventListener('click', (e) => { 
                    e.stopPropagation(); 
                    billTtTrigger.classList.toggle('active'); 
                }); 
            }

            document.addEventListener('click', () => { 
                if(ttTrigger) ttTrigger.classList.remove('active'); 
                if(billTtTrigger) billTtTrigger.classList.remove('active');
            });

            switchTab(activeTab);
        };
    </script>
</body>
</html>